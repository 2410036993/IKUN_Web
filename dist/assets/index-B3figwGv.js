import{_ as A,r as w,o as V,s as W,j as n,g as d,m as G,f as s,v as S,F as g,l as L,c as l,t as u,e as $,q as z,n as T,I as H,J as P,w as v,h as B,p as Q,i as X,k as Y,K as m,b as k}from"./index-CanqdiPq.js";import{_ as D}from"./tx-ANyguzjp.js";import{B as Z}from"./BgBoard-BijZsrlh.js";import{u as ss,L as ts}from"./useLoading-CGaVlP88.js";import{r as f}from"./request-n9dUwLq9.js";import{g as es}from"./home-C31e8XUC.js";const as="/assets/avatar-n4EBRicj.jpg",x="/talk",os=()=>f({url:x+"/list"}),ls=i=>f({url:x+"/user",method:"post",data:i}),ns=(i,c,h)=>f({url:x+`/liked/${i}/${c}/${h}`,method:"put"}),is=(i,c)=>f({url:x+`/islike/${i}/${c}`}),cs=(i,c,h)=>f({url:x+`/comment/${i}/${c}`,method:"post",params:{remork:h}}),_=i=>(Q("data-v-098547a7"),i=i(),X(),i),rs={class:"talk"},ds={class:"tx-bg"},us={class:"box"},vs=["src"],_s=_(()=>s("h5",null,"豪啊",-1)),ps={class:"tx"},ms=["src"],hs={class:"ss"},gs={class:"infinite-list",style:{overflow:"auto"}},ks={class:"tx-wz"},fs=_(()=>s("div",{class:"box"},[s("img",{class:"bg",src:D,alt:""})],-1)),xs={class:"hp"},ys=_(()=>s("h3",null,"豪啊",-1)),bs={class:"content"},ws={class:"text"},Ls={style:{color:"white"}},Cs={class:"tp"},Us={class:"dp"},Is=_(()=>s("i",{class:T({iconfont:!0,"icon-pinglun":!0}),style:{"font-size":"22px"}},null,-1)),Ns={key:0,style:{"margin-left":"7px"}},Vs=["onClick"],Ss={key:1,style:{"margin-left":"5px"}},$s={class:"box"},zs=_(()=>s("div",{class:"is"},[s("i",{class:"iconfont icon-xihuan"})],-1)),Bs={class:"dzlist"},Ts=["src"],Ds={class:"pl-box"},js=Y('<div class="pl" data-v-098547a7><i class="iconfont icon-pinglun" data-v-098547a7></i></div><div class="box" data-v-098547a7><div class="img-box" data-v-098547a7><img src="'+D+'" alt="" data-v-098547a7></div><div class="my" data-v-098547a7><div class="nt" data-v-098547a7><span style="font-weight:bold;" data-v-098547a7>豪啊</span><span data-v-098547a7>2024-06-19 11:03:06</span></div><div class="i" style="position:relative;" data-v-098547a7><span style="font-weight:600;" data-v-098547a7>大家可以随意留言哦</span><i class="iconfont icon-shanchu" style="position:absolute;top:0%;left:90%;" data-v-098547a7></i></div></div></div>',2),Ks={class:"img-box"},Es=["src"],Js={class:"my"},Ms={class:"nt"},Os={style:{"font-weight":"bold"}},qs={class:"talk-box"},Fs={class:"img-box"},Rs=["src"],As=["onKeyup"],Ws=["onClick"],Gs=_(()=>s("span",{style:{color:"#aac9fa","font-weight":"bold","font-size":"18px"}},"点赞与评论的专属印记",-1)),Hs=["src"],Ps=_(()=>s("span",{style:{color:"#8597b4"}},"+",-1)),Qs={class:"dialog-footer",style:{display:"flex"}},Xs={__name:"index",setup(i){const c=w({});V(async()=>{const e=await es();c.value=e.data});const{isLoading:h}=ss(),I=w([]),y=async()=>{const e=await os();I.value=e.data};V(()=>{y(),j()});const t=w({});t.value={avatar:"",remork:"",userName:""};const j=()=>{const e=window.localStorage.getItem("talkUser");e&&(t.value=JSON.parse(e))},K=e=>{t.value.avatar=e.data},p=w(!1),N=()=>{p.value=!1},C=async e=>{console.log(e),t.value.avatar&&t.value.userName.trim("")?t.value.remork.trim("")?(await cs(t.value.talkUserId,e,t.value.remork),m.success("言之有物 感激不尽！"),y(),t.value.remork=""):m("言语未至 心意难达！请留下您的宝贵言论再发送哦~"):p.value=!0},E=async()=>{if(t.value.avatar&&t.value.userName.trim("")){const e=await ls(t.value);t.value.talkUserId=e.data,window.localStorage.setItem("talkUser",JSON.stringify(t.value)),m.success("认证成功 点赞与评论操作随你行！"),p.value=!1}else m("认证小插曲 请检查信息后重试~")},J=async e=>{if(console.log(e),t.value.avatar&&t.value.userName.trim("")){const b=(await is(t.value.talkUserId,e)).data;await ns(t.value.talkUserId,b,e),b===1?(m.success("点赞成功!"),y()):(m.success("取消成功!"),y())}else p.value=!0};return(e,r)=>{const b=k("el-image"),U=k("el-button"),M=k("el-upload"),O=k("el-input"),q=k("el-dialog"),F=W("infinite-scroll");return l(),n(g,null,[d(ts,{"is-loading":G(h)},null,8,["is-loading"]),d(Z,{title:"说说",wengan:"在这里，我拾取心语，留下足迹，每一步都编织成生活的诗篇"}),s("div",rs,[s("div",ds,[s("div",us,[s("img",{class:"bg",src:c.value.background,alt:""},null,8,vs),_s,s("div",ps,[s("img",{src:c.value.avatar,alt:""},null,8,ms)])])]),s("div",hs,[S((l(),n("ul",gs,[(l(!0),n(g,null,L(I.value,o=>(l(),n("li",{key:o,class:"infinite-list-item"},[s("div",ks,[fs,s("div",xs,[ys,s("p",null,u(o.talk.createTime),1)])]),s("div",bs,[s("div",ws,[s("p",Ls,u(o.talk.content),1)]),s("div",Cs,[(l(!0),n(g,null,L(o.urlList,(a,R)=>(l(),$(b,{"preview-src-list":o.urlList,"initial-index":R,class:"ig",src:a,fit:"fill",key:a},null,8,["preview-src-list","initial-index","src"]))),128))]),s("div",Us,[Is,o.commentList!==null&&o.commentList.length?(l(),n("span",Ns,u(o.commentList.length),1)):z("",!0),s("i",{class:T({iconfont:!0,"icon-xihuan":!0,"i-active":o.isLike}),onClick:a=>J(o.talk.id)},null,10,Vs),o.talk.likeCount?(l(),n("span",Ss,u(o.talk.likeCount),1)):z("",!0)]),s("div",$s,[zs,s("div",Bs,[(l(!0),n(g,null,L(o.talkUserList,a=>(l(),n("div",{class:"box",key:a},[s("img",{src:a.url,alt:""},null,8,Ts)]))),128))])]),s("div",Ds,[js,(l(!0),n(g,null,L(o.commentList,a=>(l(),n("div",{class:"box",key:a},[s("div",Ks,[s("img",{src:a.userUrl,alt:""},null,8,Es)]),s("div",Js,[s("div",Ms,[s("span",Os,u(a.name),1),s("span",null,u(a.tcCreateTime),1)]),s("span",null,u(a.comment),1)])]))),128))]),s("div",qs,[s("div",Fs,[t.value.avatar?(l(),n("img",{key:0,src:t.value.avatar,class:"avatar"},null,8,Rs)):(l(),n("img",{key:1,src:as,class:"avatar",onClick:C}))]),S(s("input",{placeholder:"说点什么吧...","onUpdate:modelValue":r[0]||(r[0]=a=>t.value.remork=a),class:"input",onKeyup:H(a=>C(o.talk.id),["enter"])},null,40,As),[[P,t.value.remork]]),s("button",{type:"button",class:"btn",onClick:a=>C(o.talk.id)},"评论",8,Ws)]),d(q,{style:{"background-color":"#626a73","border-radius":"10px"},center:"",width:"400px",modelValue:p.value,"onUpdate:modelValue":r[2]||(r[2]=a=>p.value=a),onClose:N},{header:v(()=>[Gs]),footer:v(()=>[s("div",Qs,[d(U,{size:"small",onClick:N,style:{"margin-left":"114px"}},{default:v(()=>[B("取 消")]),_:1}),d(U,{size:"small",type:"primary",onClick:E,loading:e.confirmLoading},{default:v(()=>[B("确 定")]),_:1},8,["loading"])])]),default:v(()=>[d(M,{style:{"margin-left":"134px",height:"65px",width:"65px","border-radius":"4px",border:"1px solid #91c1e4"},"on-success":K,action:"/prod-api/web/talk/fileUpload"},{default:v(()=>[t.value.avatar?(l(),n("img",{key:0,src:t.value.avatar,class:"avatar"},null,8,Hs)):(l(),$(U,{key:1,style:{"background-color":"#626a73",border:"none",margin:"24px 0px 0px 16px","font-size":"13px",width:"15px",height:"15px"}},{default:v(()=>[Ps]),_:1}))]),_:1}),d(O,{placeholder:"为评论起个名字",modelValue:t.value.userName,"onUpdate:modelValue":r[1]||(r[1]=a=>t.value.userName=a),class:"pinlun-input"},null,8,["modelValue"])]),_:1},8,["modelValue"])])]))),128))])),[[F,e.load]])])])],64)}}},ot=A(Xs,[["__scopeId","data-v-098547a7"]]);export{ot as default};
